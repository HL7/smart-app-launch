# Introduction to SMART on FHIR

This implementation guide describes foundational patterns based on OAuth 2.0 for client applications to authorize, authenticate, and integrate with FHIR-based data systems.


### SMART Defines Two Patterns For Client *Authorization*

1. **SMART App Launch**. Authorizes a user-facing client application ("App") to connect to a FHIR Server. This pattern allows for "launch context" such as *currently selected patient* to be shared with the app, based on a user's session inside an EHR or other health data software, and allows for delegation of a user's permissions to the app itself. 

<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="662px" preserveAspectRatio="none" style="width:580px;height:662px;background:#FFFFFF;" version="1.1" viewBox="0 0 580 662" width="580px" zoomAndPan="magnify"><defs><filter height="300%" id="fmd75t8bd92y" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fmd75t8bd92y)" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="431.5" x="10" y="57.2969"/><rect fill="#FFFFFF" filter="url(#fmd75t8bd92y)" height="175.6016" style="stroke:#000000;stroke-width:2.0;" width="431.5" x="10" y="117.5625"/><rect fill="#FFFFFF" height="72.0703" style="stroke:none;stroke-width:1.0;" width="431.5" x="10" y="221.0938"/><rect fill="#FFFFFF" filter="url(#fmd75t8bd92y)" height="74.3984" style="stroke:#000000;stroke-width:2.0;" width="324.5" x="186.5" y="394.5625"/><rect fill="#FFFFFF" filter="url(#fmd75t8bd92y)" height="119.3359" style="stroke:#000000;stroke-width:2.0;" width="556.5" x="10" y="482.9609"/><rect fill="#FFFFFF" height="43.9375" style="stroke:none;stroke-width:1.0;" width="556.5" x="10" y="558.3594"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="44" x2="44" y1="40.2969" y2="619.2969"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="313.5" x2="313.5" y1="40.2969" y2="619.2969"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="505.5" x2="505.5" y1="40.2969" y2="619.2969"/><rect fill="#FEFECE" filter="url(#fmd75t8bd92y)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="44" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="27" y="24.9951">App</text><rect fill="#FEFECE" filter="url(#fmd75t8bd92y)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="44" x="20" y="618.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="27" y="638.292">App</text><rect fill="#FEFECE" filter="url(#fmd75t8bd92y)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="231" x="196.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="217" x="203.5" y="24.9951">EHR with Authorization Server</text><rect fill="#FEFECE" filter="url(#fmd75t8bd92y)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="231" x="196.5" y="618.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="217" x="203.5" y="638.292">EHR with Authorization Server</text><rect fill="#FEFECE" filter="url(#fmd75t8bd92y)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="455.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="462.5" y="24.9951">FHIR Server</text><rect fill="#FEFECE" filter="url(#fmd75t8bd92y)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="455.5" y="618.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="462.5" y="638.292">FHIR Server</text><path d="M10,57.2969 L82,57.2969 L82,64.2969 L72,74.2969 L10,74.2969 L10,57.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="431.5" x="10" y="57.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="25" y="70.3638">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="233" x="97" y="69.5073">[Precondition: Client Registration]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="312" x2="302" y1="95.5625" y2="91.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="312" x2="302" y1="95.5625" y2="99.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="313" y1="95.5625" y2="95.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="51" y="90.4966">(may be out of band)</text><path d="M10,117.5625 L76,117.5625 L76,124.5625 L66,134.5625 L10,134.5625 L10,117.5625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="175.6016" style="stroke:#000000;stroke-width:2.0;" width="431.5" x="10" y="117.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="130.6294">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="84" x="91" y="129.7729">[EHR Launch]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="314" x2="356" y1="170.9609" y2="170.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="356" x2="356" y1="170.9609" y2="183.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="315" x2="356" y1="183.9609" y2="183.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="315" x2="325" y1="183.9609" y2="179.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="315" x2="325" y1="183.9609" y2="187.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="321" y="150.7622">EHR user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="321" y="165.895">launches app</text><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="54" y1="213.0938" y2="209.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="54" y1="213.0938" y2="217.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="313" y1="213.0938" y2="213.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="61" y="208.0278">Launch request</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="441.5" y1="222.0938" y2="222.0938"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="136" x="15" y="232.3042">[Standalone Launch]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="86" y1="272.1641" y2="272.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="86" x2="86" y1="272.1641" y2="285.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="45" x2="86" y1="285.1641" y2="285.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="45" x2="55" y1="285.1641" y2="281.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="45" x2="55" y1="285.1641" y2="289.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="51" y="251.9653">App user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="51" y="267.0981">connects to EHR</text><line style="stroke:#A80036;stroke-width:1.0;" x1="504" x2="494" y1="321.2969" y2="317.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="504" x2="494" y1="321.2969" y2="325.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="505" y1="321.2969" y2="321.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="51" y="316.231">Discovery request</text><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="54" y1="350.4297" y2="346.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="54" y1="350.4297" y2="354.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="505" y1="350.4297" y2="350.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="61" y="345.3638">Discovery response</text><line style="stroke:#A80036;stroke-width:1.0;" x1="312" x2="302" y1="379.5625" y2="375.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="312" x2="302" y1="379.5625" y2="383.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="313" y1="379.5625" y2="379.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="51" y="374.4966">Authorization request</text><path d="M186.5,394.5625 L258.5,394.5625 L258.5,401.5625 L248.5,411.5625 L186.5,411.5625 L186.5,394.5625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="74.3984" style="stroke:#000000;stroke-width:2.0;" width="324.5" x="186.5" y="394.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="201.5" y="407.6294">opt</text><line style="stroke:#A80036;stroke-width:1.0;" x1="314" x2="356" y1="447.9609" y2="447.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="356" x2="356" y1="447.9609" y2="460.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="315" x2="356" y1="460.9609" y2="460.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="315" x2="325" y1="460.9609" y2="456.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="315" x2="325" y1="460.9609" y2="464.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="321" y="427.7622">EHR incorporates user input</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="321" y="442.895">into authorization decision</text><path d="M10,482.9609 L76,482.9609 L76,489.9609 L66,499.9609 L10,499.9609 L10,482.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="119.3359" style="stroke:#000000;stroke-width:2.0;" width="556.5" x="10" y="482.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="496.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="65" x="91" y="495.1714">[Granted]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="54" y1="521.2266" y2="517.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="54" y1="521.2266" y2="525.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="313" y1="521.2266" y2="521.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="61" y="516.1606">Authorization response (access token)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="504" x2="494" y1="550.3594" y2="546.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="504" x2="494" y1="550.3594" y2="554.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="505" y1="550.3594" y2="550.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="51" y="545.2935">Request Resources</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="566.5" y1="559.3594" y2="559.3594"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="55" x="15" y="569.5698">[Denied]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="54" y1="594.2969" y2="590.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="54" y1="594.2969" y2="598.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44" x2="313" y1="594.2969" y2="594.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="61" y="589.231">Authorization error</text>
<!--MD5=[fbdd43bf5794d0391577d5f4652976f4]
@startuml
participant App
participant "EHR with Authorization Server" as EHR
participant "FHIR Server" as FHIR

opt  Precondition: Client Registration
    App ->> EHR: (may be out of band)
end
alt EHR Launch
    EHR->>EHR: EHR user \nlaunches app
    EHR->> App: Launch request
else Standalone Launch
    App->>App: App user \nconnects to EHR
end
App ->> FHIR: Discovery request
FHIR ->> App: Discovery response
App ->> EHR: Authorization request
opt 
    EHR->> EHR: EHR incorporates user input\ninto authorization decision
end
alt Granted
    EHR ->> App: Authorization response (access token)
    App ->> FHIR: Request Resources
else Denied
    EHR ->> App: Authorization error
end
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>

2. **SMART Backend Services**. Authorizes a headless or automated client application ("Backend Service") to connect to a FHIR Server. This pattern allows for backend services to connect and interact with an EHR when there is no user directly involved in the launch process, or in other circumstances where permissions are assigned to the client out-of-band.


<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="384px" preserveAspectRatio="none" style="width:611px;height:384px;background:#FFFFFF;" version="1.1" viewBox="0 0 611 384" width="611px" zoomAndPan="magnify"><defs><filter height="300%" id="f5iaj3l53yx78" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f5iaj3l53yx78)" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="476" x="10" y="57.2969"/><rect fill="#FFFFFF" filter="url(#f5iaj3l53yx78)" height="119.3359" style="stroke:#000000;stroke-width:2.0;" width="587" x="10" y="204.9609"/><rect fill="#FFFFFF" height="43.9375" style="stroke:none;stroke-width:1.0;" width="587" x="10" y="280.3594"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="88" x2="88" y1="40.2969" y2="341.2969"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="358" x2="358" y1="40.2969" y2="341.2969"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="536" x2="536" y1="40.2969" y2="341.2969"/><rect fill="#FEFECE" filter="url(#f5iaj3l53yx78)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="27" y="24.9951">Backend Service</text><rect fill="#FEFECE" filter="url(#f5iaj3l53yx78)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="20" y="340.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="27" y="360.292">Backend Service</text><rect fill="#FEFECE" filter="url(#f5iaj3l53yx78)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="231" x="241" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="217" x="248" y="24.9951">EHR with Authorization Server</text><rect fill="#FEFECE" filter="url(#f5iaj3l53yx78)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="231" x="241" y="340.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="217" x="248" y="360.292">EHR with Authorization Server</text><rect fill="#FEFECE" filter="url(#f5iaj3l53yx78)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="486" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="493" y="24.9951">FHIR Server</text><rect fill="#FEFECE" filter="url(#f5iaj3l53yx78)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="486" y="340.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="493" y="360.292">FHIR Server</text><path d="M10,57.2969 L82,57.2969 L82,64.2969 L72,74.2969 L10,74.2969 L10,57.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="476" x="10" y="57.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="25" y="70.3638">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="233" x="97" y="69.5073">[Precondition: Client Registration]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="346.5" y1="95.5625" y2="91.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="346.5" y1="95.5625" y2="99.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="357.5" y1="95.5625" y2="95.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="95.5" y="90.4966">(may be out of band)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="534.5" x2="524.5" y1="131.6953" y2="127.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="534.5" x2="524.5" y1="131.6953" y2="135.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="535.5" y1="131.6953" y2="131.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="95.5" y="126.6294">Discovery request</text><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="98.5" y1="160.8281" y2="156.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="98.5" y1="160.8281" y2="164.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="535.5" y1="160.8281" y2="160.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="105.5" y="155.7622">Discovery response</text><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="346.5" y1="189.9609" y2="185.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="346.5" y1="189.9609" y2="193.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="357.5" y1="189.9609" y2="189.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="95.5" y="184.895">Authorization request</text><path d="M10,204.9609 L76,204.9609 L76,211.9609 L66,221.9609 L10,221.9609 L10,204.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="119.3359" style="stroke:#000000;stroke-width:2.0;" width="587" x="10" y="204.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="218.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="65" x="91" y="217.1714">[Granted]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="98.5" y1="243.2266" y2="239.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="98.5" y1="243.2266" y2="247.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="357.5" y1="243.2266" y2="243.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="105.5" y="238.1606">Authorization response (access token)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="534.5" x2="524.5" y1="272.3594" y2="268.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="534.5" x2="524.5" y1="272.3594" y2="276.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="535.5" y1="272.3594" y2="272.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="95.5" y="267.2935">Request Resources</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="597" y1="281.3594" y2="281.3594"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="55" x="15" y="291.5698">[Denied]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="98.5" y1="316.2969" y2="312.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="98.5" y1="316.2969" y2="320.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="88.5" x2="357.5" y1="316.2969" y2="316.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="105.5" y="311.231">Authorization error</text>
<!--MD5=[c1c25bbb927778cce054ca91d91725e3]
@startuml
participant App as "Backend Service"
participant "EHR with Authorization Server" as EHR
participant "FHIR Server" as FHIR

opt  Precondition: Client Registration
    App ->> EHR: (may be out of band)
end
App ->> FHIR: Discovery request
FHIR ->> App: Discovery response
App ->> EHR: Authorization request
alt Granted
    EHR ->> App: Authorization response (access token)
    App ->> FHIR: Request Resources
else Denied
    EHR ->> App: Authorization error
end
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>


### SMART Defines Two Patterns For Client *Authentication*

When clients need to authenticate, this implementation guide defines two methods:

1. **Asymmetric ("public key") authentication**. Authenticates a client using a public/private keypair. This is SMART's preferred authentication method because it avoids sending a shared secret over the wire.
2. **Symmetric ("client secret") authentication**. Authenticate a client using a secret that has been pre-shared between the client and server.

*Note that client authentication is not required in all authorization scenarios, and not all SMART clients are capable of authenticating (see discussion of ["Public Clients"](app-launch.html#support-for-public-and-confidential-apps) in the SMART App Launch overview).*


### Scopes for Limiting Acess

SMART uses a language of "scopes" to define specific access permissions that can be delegated to a client application. These scopes draw on FHIR API definitions for interactions, resource types, and search paramters to describe a permissions model. For example, an app might be granted scopes like `user/Encounter.rs`, allowing it to read and search for Encounters that are accessible to the user who has authorized the app. Similarly, a backend service might be granted scopes like `system/Encounter.rs`, allowing it to read and search for Encounters within the overall set of data it is configured to access. User-facing apps can also receive "launch context" to indicate details about the current patient or other aspects of a user's EHR session or a user's selections when launching the app.


### Discovery of Server Capabilities and Configuration

SMART defines a discovery document available at `.well-known/smart-configuration` relative to a FHIR Server Base URL, allowing clients to learn the authorization endpoint URLs and features a server supports. This information helps client direct authorization requests to the right endpoint, and helps clients construct an authorization request that the server can support.